#define DHTTYPE DHT11  // used sensor, DHT11 or DHT22
#define potPIN A1
#define mosPIN 2
#define sensVCC 3
#define sensDATA 4
#define sensGND 5
#define blueLED 11
#define redLED 12
#define DHTPIN A5

#include <LiquidCrystal.h>
#include <DHT.h>
DHT dht(sensDATA, DHTTYPE, DHTPIN);

LiquidCrystal lcd(12, 11, 5, 4, 3, 2);

byte grau[8] ={ B00001100,
                B00010010,
                B00010010,
                B00001100,
                B00000000,
                B00000000,
                B00000000,
                B00000000,};

unsigned long readTimer;
float hum;
int pot;

void setup() {
  // configure pins
  pinMode(mosPIN, OUTPUT);
  pinMode(sensVCC, OUTPUT);
  pinMode(sensGND, OUTPUT);
  pinMode(blueLED, OUTPUT);
  pinMode(redLED, OUTPUT);
  pinMode(sensDATA, INPUT_PULLUP);
  digitalWrite(mosPIN, 0);
  digitalWrite(sensVCC, 1);
  digitalWrite(sensGND, 0);
  digitalWrite(blueLED, 0);
  digitalWrite(redLED, 0);

  Serial.begin(9600);
  lcd.begin(16,2); //Inicializa LCD
  lcd.clear(); //Limpa o LCD
//Cria o caractere customizado com o simbolo do grau
  lcd.createChar(0, grau);
  dht.begin();
  dht.begin();
  delay(1000);
  hum = dht.readHumidity();
}

void loop() {
  pot = analogRead(potPIN) / 10;   // convert pot value to ~0-100 range
  if (pot > hum) {                 // if set value more than air humidity
    digitalWrite(mosPIN, 1);       // power on
    digitalWrite(blueLED, 1);
    digitalWrite(redLED, 1);
  } else {                         // if not
    digitalWrite(mosPIN, 0);       // power off
    digitalWrite(blueLED, 0);
    digitalWrite(redLED, 0);
  }

  if (millis() - readTimer > 1000) {  // 1 second timeout
    hum = dht.readHumidity();         // get humidity
    readTimer = millis();
  }
  delay (5);
  
  
  float h = dht.readHumidity(); //Le o valor da umidade
float t = dht.readTemperature(); //Le o valor da temperatura
lcd.setCursor(0,0);
lcd.print("Temp : ");
lcd.print(" ");
lcd.setCursor(7,0);
lcd.print(t,1);
lcd.setCursor(12,0);
lcd.write((byte)0);
lcd.setCursor(0,1);
lcd.print("Umid : ");
lcd.print(" ");
lcd.setCursor(7,1);
lcd.print(h,1);
lcd.setCursor(12,1);
lcd.print("%");

  delay(2000);                         // some delay for system stability
}
